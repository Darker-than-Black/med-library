<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MedTableApp</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

</head>
<body>
  <app-med-table config=""></app-med-table>

  <script>
    const appRoot = document.querySelector('app-med-table');

    appRoot.setAttribute('config', JSON.stringify({
      fields: [
        {
          key: 'mnn.id',
          label: 'mnn_id',
          filterable: true,
          minWidth: '5rem',
        },
        {
          key: 'mnn.type',
          label: 'Напрям',
          filterable: true,
        },
        {
          key: 'mnn.subtype',
          label: 'Піднапрям',
          filterable: true,
        },
        {
          key: 'mnn.name',
          label: 'МНН',
          filterable: true,
        },
        {
          key: 'mnn.release_form',
          label: 'Форма випуску',
          filterable: true,
        },
        {
          key: 'mnn.dosage',
          label: 'Дозування',
          filterable: true,
        },
        {
          key: 'cpv_code',
          label: 'CPV-код',
          filterable: true,
          editorType: "select",
          minWidth: '10rem',
        },
        {
          key: 'responsible',
          sortKey: 'responsible.name',
          label: 'Відповідальний менеджер',
          filterable: true,
          editorType: "select",
        },
        {
          key: 's20',
          label: 'Доведена кількість МОЗ',
          filterable: true,
          editorType: "number",
          defaultValue: '0',
        },
        {
          key: 'tender_quantity',
          label: 'Кількість закупівлі',
          filterable: true,
          editorType: "number",
          defaultValue: '0',
        },
        {
          key: 'publisher',
          sortKey: 'publisher.name',
          label: 'Відповідальна особа за підписання',
          filterable: true,
          editorType: "select",
        },
        {
          key: 'agreement_value',
          label: 'Сума позиції за договором',
          filterable: true,
          editorType: "text",
          decimal: true,
        },
        {
          key: 'agreement_num',
          label: 'Номер договору',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'agreement_fact_date',
          label: 'Дата підписання договору',
          filterable: true,
          editorType: "date",
        },
        {
          key: 'agreement_final_date',
          label: 'Кінцева дата дії договору',
          filterable: true,
          editorType: "date",
        },
        {
          key: 'delivery_date',
          label: 'Строк поставки',
          filterable: true,
          editorType: "date",
        },
        {
          key: 'winner',
          label: 'Переможець',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'winner_edrpou',
          label: 'ЄДРПОУ переможця',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'manufacturer',
          label: 'Виробник',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'manufacturer_country',
          label: 'Країна виробника',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'trade_name',
          label: 'Торгова назва',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'tender_id',
          label: 'Посилання на Prozorro',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'api_id',
          label: 'API Prozorro',
          filterable: true,
          editorType: "text",
        },
        {
          key: 'quantity',
          label: 'Кількість закупівлі (Додаткова угода)',
          filterable: true,
          editorType: "number",
        },
        {
          key: 'proc_sum',
          label: 'Сума позиції (Додаткова угода)',
          filterable: true,
          editorType: "text",
          decimal: true,
        },
        {
          key: 'agreement_final_date',
          label: 'Кінцева дата дії договору (Додаткова угода)',
          filterable: true,
          editorType: "date",
        },
      ],
      settings: {
        export: true,
        // sticky: false,
      },
      urls: {
        get: 'https://meddata.com.ua/index.php?method=Procurements&function=purchaseForm&option=com_fabrik&format=raw&task=plugin.userAjax&dev=1',
        update: 'https://meddata.com.ua/index.php?method=Procurements&function=savePurchaseForm&option=com_fabrik&format=raw&task=plugin.userAjax&dev=1',
      },
    }));
  </script>
</body>
</html>
